<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Azka Water Order Page</title>
<style>
  body {font-family: Arial, sans-serif; margin:0; padding:0; background:#f9fff9; color:#004d00;}
  header {background:#d4f8d4; text-align:center; padding:2rem 1rem;}
  header h1 {margin:0; font-size:2rem;}
  section {max-width:600px; margin:2rem auto; background:#fff; padding:2rem; border-radius:10px; box-shadow:0 2px 8px rgba(0,0,0,0.1);}
  h2 {text-align:center; margin-bottom:1rem;}
  label {display:block; margin:0.8rem 0 0.2rem;}
  input[type="number"] {width:100%; padding:0.6rem; margin-bottom:0.8rem; border-radius:5px; border:1px solid #ccc;}
  .total {font-weight:bold; margin-top:1rem; font-size:1.1rem;}
  .btn {background-color:#007a33; color:white; padding:0.7rem 1.5rem; border:none; border-radius:5px; font-size:1rem; cursor:pointer; text-decoration:none; display:inline-block; width:100%; margin-top:1rem;}
  .btn:hover {background-color:#005f26;}
  .readonly {background:#e8f5e8; padding:0.5rem; border-radius:5px; border:1px solid #ccc;}
</style>
</head>
<body>

<header>
  <h1>Azka Water — أزكى واٹر</h1>
  <p>Place Your Order</p>
</header>

<section>
  <h2>Order Details</h2>

  <label>Product</label>
  <div class="readonly" id="productName">Loading...</div>

  <label>Unit Price (PKR)</label>
  <div class="readonly" id="unitPrice">0</div>

  <label>Quantity</label>
  <input type="number" id="quantity" min="1" value="1">
  <div class="total">Total Price: PKR <span id="totalPrice">0</span></div>

  <label>Name</label>
  <input type="text" id="name" placeholder="Enter your full name">

  <label>Mobile Number</label>
  <input type="tel" id="mobile" placeholder="Enter your mobile number">

  <label>Address</label>
  <input type="text" id="address" placeholder="Enter delivery address">

  <button class="btn" id="submitBtn">Submit Order</button>
</section>

<script>
  // Get URL parameters
  const params = new URLSearchParams(window.location.search);
  const product = params.get('product') || '';
  const price = parseFloat(params.get('price')) || 0;

  const productNameDiv = document.getElementById('productName');
  const unitPriceDiv = document.getElementById('unitPrice');
  const quantityInput = document.getElementById('quantity');
  const totalPriceSpan = document.getElementById('totalPrice');

  // Determine unit label
  let unitLabel = 'units';
  if(product.includes('19L')) unitLabel = 'bottles';
  else if(product.includes('1.5L') || product.includes('500ml')) unitLabel = 'pets';

  // Set placeholders and values
  productNameDiv.textContent = product;
  unitPriceDiv.textContent = price.toLocaleString('en-US', {minimumFractionDigits:2}) + ' PKR';
  quantityInput.placeholder = unitLabel;

  function updateTotal() {
    const qty = parseInt(quantityInput.value) || 0;
    const total = qty * price;
    totalPriceSpan.textContent = total.toLocaleString('en-US', {minimumFractionDigits:2});
  }

  quantityInput.addEventListener('input', updateTotal);
  updateTotal(); // initial

  // WhatsApp submission
  document.getElementById('submitBtn').addEventListener('click', function() {
    const name = document.getElementById('name').value.trim();
    const mobile = document.getElementById('mobile').value.trim();
    const address = document.getElementById('address').value.trim();
    const quantity = quantityInput.value || 0;
    const total = (quantity*price).toLocaleString('en-US', {minimumFractionDigits:2});

    if(!name || !mobile || !address || quantity <= 0) {
      alert('Please fill all fields correctly!');
      return;
    }

    const message = `New Order from Azka Water:\n\nProduct: ${product}\nUnit Price: PKR ${price}\nQuantity: ${quantity} ${unitLabel}\nTotal Price: PKR ${total}\nName: ${name}\nMobile: ${mobile}\nAddress: ${address}`;
    const whatsappNumber = '923021607004'; // your WhatsApp number
    const url = `https://wa.me/${whatsappNumber}?text=${encodeURIComponent(message)}`;
    window.open(url, '_blank');
  });
</script>

</body>
</html>
